import sqlite3

# Database Initialization
def init_db():
    conn = sqlite3.connect('chocolate_house.db')
    cursor = conn.cursor()
    
    # Create tables
    cursor.execute('''CREATE TABLE IF NOT EXISTS seasonal_flavors (
                        id INTEGER PRIMARY KEY AUTOINCREMENT,
                        name TEXT NOT NULL,
                        description TEXT
                    )''')

    cursor.execute('''CREATE TABLE IF NOT EXISTS ingredient_inventory (
                        id INTEGER PRIMARY KEY AUTOINCREMENT,
                        name TEXT NOT NULL,
                        quantity INTEGER NOT NULL
                    )''')

    cursor.execute('''CREATE TABLE IF NOT EXISTS customer_feedback (
                        id INTEGER PRIMARY KEY AUTOINCREMENT,
                        name TEXT,
                        suggestion TEXT,
                        allergy_concern TEXT
                    )''')

    conn.commit()
    conn.close()

# CRUD Operations
def add_seasonal_flavor(name, description):
    conn = sqlite3.connect('chocolate_house.db')
    cursor = conn.cursor()
    cursor.execute("INSERT INTO seasonal_flavors (name, description) VALUES (?, ?)", (name, description))
    conn.commit()
    conn.close()
    print(f"Added seasonal flavor: {name}")

def list_seasonal_flavors():
    conn = sqlite3.connect('chocolate_house.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM seasonal_flavors")
    flavors = cursor.fetchall()
    conn.close()
    return flavors

def add_customer_feedback(name, suggestion, allergy_concern):
    conn = sqlite3.connect('chocolate_house.db')
    cursor = conn.cursor()
    cursor.execute("INSERT INTO customer_feedback (name, suggestion, allergy_concern) VALUES (?, ?, ?)",
                   (name, suggestion, allergy_concern))
    conn.commit()
    conn.close()
    print(f"Added feedback from {name}")

# Command Line Interface
def main():
    init_db()
    while True:
        print("\nChocolate House Management")
        print("1. Add Seasonal Flavor")
        print("2. List Seasonal Flavors")
        print("3. Add Customer Feedback")
        print("4. Exit")

        choice = input("Enter your choice: ")
        if choice == '1':
            name = input("Enter flavor name: ")
            description = input("Enter description: ")
            add_seasonal_flavor(name, description)
        elif choice == '2':
            flavors = list_seasonal_flavors()
            for flavor in flavors:
                print(f"ID: {flavor[0]}, Name: {flavor[1]}, Description: {flavor[2]}")
        elif choice == '3':
            name = input("Enter your name: ")
            suggestion = input("Enter your flavor suggestion: ")
            allergy_concern = input("Enter any allergy concerns: ")
            add_customer_feedback(name, suggestion, allergy_concern)
        elif choice == '4':
            print("Goodbye!")
            break
        else:
            print("Invalid choice. Please try again.")

if __name__ == "__main__":
    main()
